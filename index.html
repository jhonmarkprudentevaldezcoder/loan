<!DOCTYPE html>
<html lang="en">
<head>
    <title>LOAN MANAGE</title>
    <link rel="stylesheet" href="style.css"

</head>
<body>
       <header>
        <h2 class="logo">LMS</h2>
          <nav class="navigation">
            <a href="index.html">Home</a>
            <a href="about.html">About Us</a>
            <a href="verification.html">Verify account</a>
            <button class="btnLogin-popup">Login</button>
          </nav>
        </div>
       </header>

    
       <div class="picture">
        <img src="https://cdn-icons-png.flaticon.com/256/4954/4954407.png" alt="money" class="fade-in">
      </div>


       
       

       <div class="textlng">
        <div class="text-lng">
          <h1 class="text-line">Empowering Dreams</h1>
          <h1 class="text-line">One Loan </h1>
          <h1 class="text-line">At  a Time</h1>
          <h1 class="text-line1">Success is not about the <br>absence of challenges, but the ability 
            to overcome<br> them with determination and the right financial support.</h1>
        </div>
        <button class="downloadapp">Download App</button>
      </div>
     


      <div class="top-text">
        <h2>Why you will  Choose Our <br> LMS?</h2>
    </div>

    <div class="top-text1">
        <h2>How to Apply?<br> Basic Steps!</h2>
    </div>
    
     
    <div class="main-card">
      <div class="card">
        <img class="imahe" src="https://cdn-icons-png.flaticon.com/256/7102/7102067.png">
        <h1 class="h1s">Online Apply</h1>
        <p>Apply Loan In Online <br>Application</p>
    </div>
    </div>

<div class="imahe3">
    <img class="larawan" src="https://cdn-icons-png.flaticon.com/256/11464/11464443.png">
</div>
    
    <div class="card1">
        <img class="imahe1" src="https://cdn-icons-png.flaticon.com/256/10830/10830623.png">
        <h1 class="h1s">Fast Approval</h1>
        <p>Just Fill all the need  <br>Requirments</p>
    </div>

  
    <div class="card2">
        <img class="imahe2" src="https://cdn-icons-png.flaticon.com/256/9674/9674600.png">
        <h1 class="h1s">Friendly Staff</h1>
        <p>Need assistance? <br>just Ask what you need!</p>
        
    
    <div class="card3">
            <img class="imahe4" src="https://cdn-icons-png.flaticon.com/128/3601/3601002.png">
            <h1 class="h1ss">Register And Login</h1>
    </div>


    <div class="card4">
        <img class="imahe4" src="https://cdn-icons-png.flaticon.com/128/3601/3601634.png">
        <h1 class="h1ss">Fill out required fields</h1>
    </div>

    <div class="card5">
        <img class="imahe4" src="https://cdn-icons-png.flaticon.com/128/3840/3840739.png">
        <h1 class="h2ss">Wait for a confirmation through SMS</h1>
    </div>

    <div class="card6">
        <img class="imahe5" src="https://cdn-icons-png.flaticon.com/128/6459/6459667.png">
        <img class="imahe6" src="images/CDM.png">
        <img class="imahe7" src="images/bsit.png">
        <p class="lugar">Loan Management System.<br>PH1F Sub.UrbanRod.<br> San Jose | 8887-9188<br><br>This Website is Our Final Project
        <br>For Capstone!<br><br>Â© 2023 All rights reserved.</p>
        <P class="school">Students Of<br>Colegio De Montalban</P>
        <P class="school1">Bachelor Of Science In<br>Information Technology</P>
    </div>

    
      <!--  WRAPPER LIKE CONTAINER LOGIN FROM-->
     <div class="wrapper">
        <span class="icon-close"><ion-icon name="close"></ion-icon></span>
        <div class="form-box login">
            <h2>Login</h2>
            <form action="#">
                <div class="input-box">
                    <span class="icon"><ion-icon name="mail"></ion-icon></span>
                    <input type="email" id="loginEmail" required autocomplete="off">
                    <label>Email</label>
                </div>
                <div class="input-box">
                    <span class="icon"><ion-icon name="lock-closed"></ion-icon></span>
                    <input type="password" id="loginPassword" required >
                    <label>Password</label>
                </div>
                <div class="remember-forgot">
                    <label><input type="checkbox">Remember me</label>
                    <a href="forgotpass.html">Forgot Password?</a>
                </div>
                <div id="errorMessage" class="error-message"></div>
                <button type="submit" class="btn">Login</button>
                <div class="login-register">
                    <p>Don't have an account?    <a href="#" class="register-link">Register</a></p>
                </div>
            </form>
        </div>
        <!--  WRAPPER LIKE CONTAINER LOGIN FORM-->

        <!--  THML FOR REGISTER FORM -->
        <div class="form-box register">
            <h2>Registration</h2>
            <form id="registrationForm" action="#">
                <div class="input-box">
                    <span class="icon"><ion-icon name="person"></ion-icon></span>
                    <input id="username" type="text" maxlength="12" required autocomplete="off">
                    <label>Username (max 12 characters)</label>
                </div>
                <div class="input-box">
                    <span class="icon"><ion-icon name="mail"></ion-icon></span>
                    <input id="email" type="email" required autocomplete="off">
                    <label>Email (need valid for verification)</label>
                </div>
                <div class="input-box">
                    <span class="icon"><ion-icon name="lock-closed"></ion-icon></span>
                    <input id="password" type="password" required>
                    <label>Password</label>
                </div>
                <div class="remember-forgot">
                    <label><input id="termsCheckbox" type="checkbox">I agree to the terms & conditions</label>
                </div>
                <div id="message" class="message"></div>
                <button id="registerButton" type="submit" class="btn">Register</button>
                <div class="login-register">
                    <p>Already an a account?    <a href="#" class="login-link">Login</a></p>
                </div>
            </form>
        </div>
     </div>
    
     <!--  END FOR REGISTER FORM -->

<!-- --------------------------------------------------------------------------------------------------------------- -->

     <!-- JS FOR VERIFYING EMAIL  -->
     <script>
        const emailInput = document.getElementById('email');
        const registerButton = document.getElementById('registerButton');
    
        function isValidEmail(email) {
            const emailPattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;
            return emailPattern.test(email);
        }
    
        emailInput.addEventListener('input', () => {
            if (isValidEmail(emailInput.value)) {
                emailInput.classList.remove('invalid');
            } else {
                emailInput.classList.add('invalid');
            }
        });
    
        registerButton.addEventListener('click', (event) => {
            if (!isValidEmail(emailInput.value)) {
                event.preventDefault(); // Prevent form submission
                alert('Please enter a valid email address.');
            }
        });
    </script>
    <!-- JS FOR VERIFYING EMAIL  -->
    

<!--  JS FOR ICONS-->
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
<!--  JS FOR ICONS-->


<!-- START OF  REGISTER JS -->
<script src="index.js"></script> 

<script>
    document.addEventListener('DOMContentLoaded', () => {
    const registrationForm = document.getElementById('registrationForm');
    const messageElement = document.getElementById('message');

    registrationForm.addEventListener('submit', (event) => {
        event.preventDefault();
        registerUser(messageElement);
    });

    const inputFields = document.querySelectorAll('#username, #email, #password');
    inputFields.forEach(input => {
        input.addEventListener('input', () => {
            clearErrorMessage(messageElement);
        });
    });
});

function clearErrorMessage(messageElement) {
    messageElement.textContent = '';
    messageElement.classList.remove('success', 'error');
}

function registerUser(messageElement) {
    const usernameInput = document.getElementById('username');
    const emailInput = document.getElementById('email');
    const passwordInput = document.getElementById('password');
    const termsCheckbox = document.getElementById('termsCheckbox');

    if (!termsCheckbox.checked) {
        alert("Please agree to the terms & conditions.");
        return;
    }

    const username = usernameInput.value;
    const email = emailInput.value;
    const password = passwordInput.value;

    const userData = {
        username: username,
        email: email,
        password: password
    };

    fetch('/register', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(userData)
    })
    .then(response => response.json())
    .then(data => {
        if (data.message === 'User registered successfully') {
            messageElement.textContent = "Registration successful!<br>Please Verify your Account";
            messageElement.classList.add('success');

            window.location.href = 'verification.html';

            usernameInput.value = '';
            emailInput.value = '';
            passwordInput.value = '';
            termsCheckbox.checked = false;
        } else if (data.message === 'Username already exists' || data.message === 'Email already exists') {
            messageElement.textContent = data.message;
            messageElement.classList.add('error');
        }
    })
    .catch(error => {
        console.error('Error:', error);
    });
}
    </script>
    <!-- END OF THE REGISTER JS -->
    

    <!-- START OF LOGIN JS-->
<script>
    document.addEventListener('DOMContentLoaded', () => {
    const loginForm = document.querySelector('.form-box.login form');
    const errorMessage = document.getElementById('errorMessage'); // Get the error message element
    
    loginForm.addEventListener('submit', async (event) => {
        event.preventDefault(); // Prevent default form submission

        const email = document.getElementById('loginEmail').value;
        const password = document.getElementById('loginPassword').value;

        const userData = {
            email: email,
            password: password
        };

        // Send login data to the server
        try {
            const response = await fetch('/login', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(userData)
            });

            const data = await response.json();

            if (data.message === 'Login successful') {
                console.log('Login successful');

                // Store the username in session storage
                sessionStorage.setItem('username', data.username);
                // Show an alert for successful login
                alert('Login successful!');
                // Redirect to the contact.html page
                window.location.href = '/dashboard.html';

            } else if (data.message === 'Invalid credentials') {
                console.error('Invalid credentials');
                // Show an alert for invalid credentials
                errorMessage.textContent = 'Wrong email or password'; // Display error message
                errorMessage.style.color = 'red'; // Set text color to red

            } else if (data.message === 'Please verify your account first') {
                console.error('Account not verified');
                // Show an alert for unverified account
                errorMessage.textContent = 'Please verify your account first'; // Display error message
                errorMessage.style.color = 'red'; // Set text color to red

            } else {
                console.error('Login failed');
            }
        } catch (error) {
            console.error('Error:', error);
        }
    });
});


</script>
<!-- END OF LOGIN JS -->



    
</body>
</html>